name: deployStaging
on:
  push:
    branches: [ "staging" ]
  pull_request:
    branches: [ "staging" ]
  workflow_dispatch:
jobs:
  makeOutput:
    runs-on: ubuntu-latest
    outputs:
      ENVIRONMENT: ${{ steps.derp.outputs.ENVIRONMENT }}
    steps:
      - uses: actions/checkout@v3
      - name: derpid
        id: derp
        run: |
          echo ENVIRONMENT=staging >> $GITHUB_OUTPUT
          echo staging >> $GITHUB_ENV
   
  buildStaging:
    needs: makeOutput
    environment: fromJson(needs.build.outputs.ENVIRONMENT)
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Run a one-line script
        run: |
          echo $GITHUB_ENV;
      
 
